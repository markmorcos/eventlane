<div class="min-h-screen bg-background py-16">
  <div class="mx-auto max-w-7xl px-4 sm:px-6">
    <div class="mb-8 flex items-center justify-between">
      <h2 class="text-3xl font-bold text-foreground">Events</h2>
      @if (isAuthenticated()) {
      <button hlmBtn routerLink="/events/create">Create event</button>
      }
    </div>

    @if (loading()) {
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      @for (_ of [1, 2, 3, 4, 5, 6]; track $index) {
      <hlm-skeleton-card />
      }
    </div>
    } @else if (events().length === 0) {
    <div class="flex flex-col items-center justify-center py-20 text-center">
      <svg
        width="120"
        height="120"
        viewBox="0 0 120 120"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        class="mb-6"
      >
        <circle cx="60" cy="60" r="50" fill="#F0F4FF" />
        <path
          d="M40 50h40M40 60h20M45 70h30"
          stroke="#2D5BFF"
          stroke-width="3"
          stroke-linecap="round"
        />
      </svg>
      <h3 class="text-2xl font-semibold text-foreground mb-2">
        Create your first event now!
      </h3>
      <p class="text-muted-foreground">
        You can create and manage events once you sign in.
      </p>
    </div>
    } @else {
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      @for (event of events(); track event.slug) {
      <div
        class="cursor-pointer rounded-xl border border-border bg-card p-6 shadow-sm transition-shadow hover:shadow-md"
        [routerLink]="['/events', event.slug]"
      >
        <h3 class="text-xl font-semibold text-foreground mb-2">
          {{ event.title }}
        </h3>

        <!-- Event date/time -->
        <div class="flex items-center gap-2 text-sm text-muted-foreground mb-4">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="14"
            height="14"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
            <line x1="16" y1="2" x2="16" y2="6" />
            <line x1="8" y1="2" x2="8" y2="6" />
            <line x1="3" y1="10" x2="21" y2="10" />
          </svg>
          <span>{{
            formatEventDateTime(event.eventDate, event.timezone)
          }}</span>
        </div>

        <div class="space-y-3">
          <div class="flex justify-between text-sm">
            <span class="text-muted-foreground">Capacity:</span>
            <span class="font-medium text-foreground"
              >{{ event.confirmedCount }} / {{ event.capacity }}</span
            >
          </div>
          @if (event.waitlistedCount > 0) {
          <div class="flex justify-between text-sm">
            <span class="text-muted-foreground">Waitlist:</span>
            <span class="font-medium text-foreground">{{
              event.waitlistedCount
            }}</span>
          </div>
          }
          <div class="flex justify-between text-sm items-center">
            <span class="text-muted-foreground">Status:</span>
            <span
              hlmBadge
              [variant]="
                event.confirmedCount < event.capacity ? 'success' : 'warning'
              "
            >
              {{
                event.confirmedCount < event.capacity
                  ? "Space available"
                  : "Full"
              }}
            </span>
          </div>
        </div>
      </div>
      }
    </div>
    }
  </div>
</div>
