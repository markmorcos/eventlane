<div class="events-list">
  <div class="header">
    <h2>My events</h2>
    @if (isAuthenticated()) {
    <button class="primary" routerLink="/events/create">Create event</button>
    }
  </div>

  @if (loading()) {
  <div class="loading-spinner">
    <div class="spinner"></div>
  </div>
  } @else if (events().length === 0) {
  <div class="empty-state">
    <svg
      width="120"
      height="120"
      viewBox="0 0 120 120"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="60" cy="60" r="50" fill="#F0F4FF" />
      <path
        d="M40 50h40M40 60h20M45 70h30"
        stroke="#2D5BFF"
        stroke-width="3"
        stroke-linecap="round"
      />
    </svg>
    <h3>Create your first event now!</h3>
    <p>You can create and manage events once you sign in.</p>
  </div>
  } @else {
  <div class="events-grid">
    @for (event of events(); track event.slug) {
    <div class="card event-card" [routerLink]="['/events', event.slug]">
      <h3>{{ event.title }}</h3>
      <div class="event-info">
        <div class="info-row">
          <span class="label">Capacity:</span>
          <span>{{ event.confirmedCount }} / {{ event.capacity }}</span>
        </div>
        @if (event.waitlistedCount > 0) {
        <div class="info-row">
          <span class="label">Waitlist:</span>
          <span>{{ event.waitlistedCount }}</span>
        </div>
        }
        <div class="info-row">
          <span class="label">Status:</span>
          <span
            class="badge"
            [class.confirmed]="event.confirmedCount < event.capacity"
            [class.waitlisted]="event.confirmedCount >= event.capacity"
          >
            {{
              event.confirmedCount < event.capacity ? "Space available" : "Full"
            }}
          </span>
        </div>
      </div>
    </div>
    }
  </div>
  }
</div>
